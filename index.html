<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiSEBand</title>
    <script>
        const start = new Promise(async (resolve, reject) => {
            if (!window.Notification) reject('이 브라우저가 window.Notification을 지원하지 않습니다.') //window.Notification || window.mozNotification || window.webkitNotification
            const permission = await window.Notification.requestPermission()
            if (permission != "granted") reject('알림이 허용되어 있지 않아서 메시지 도착을 알 수 없는 경우가 발생합니다. 알림을 허용하시기 바립니다.')
            resolve() //html5 notification은 https만 지원 (localhost에서는 http도 지원 - 크롬 테스트 OK)
        })

        start.then(() => {
            sessionStorage.pageShown = 'Y'
            document.addEventListener("visibilitychange", () => {
                if (document.hidden) {
                    sessionStorage.pageShown = 'N'
                } else {
                    sessionStorage.pageShown = 'Y'
                }
            })
        }).catch(error => {
            alert(error)
        }) //.finally(() => {})
    </script>
  </head>
  <body oncontextmenu="return false"><!-- 컨텍스트메뉴 만들어 사용하는데 .vue에서 .prevent가 안먹혀 여기서 일단 처리함 -->
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
